<!--random.wxml-->
<view class="container">
  <!-- ç­›é€‰å™¨é¢æ¿ -->
  <view class="filters-panel">
    <!-- è¯„åˆ†å’Œæ”¶è—åœ¨åŒä¸€è¡Œ -->
    <view class="filter-row">
      <view class="filter-rating">
        <view class="rating-header">
          <text>æœ€ä½è¯„åˆ†</text>
          <text>{{filters.minRating}}æ˜ŸåŠä»¥ä¸Š</text>
        </view>
        <view class="rating-slider">
          <slider min="0" max="5" step="1" value="{{filters.minRating}}" bindchange="updateFilter"
            data-field="minRating" activeColor="#07c160" block-color="#07c160" show-value="{{false}}" />
          <view class="slider-scales">
            <text>0</text>
            <text>1</text>
            <text>2</text>
            <text>3</text>
            <text>4</text>
            <text>5</text>
          </view>
        </view>
      </view>

      <view class="filter-favorite">
        <checkbox checked="{{filters.onlyFavorites}}" bindchange="updateFilter" data-field="onlyFavorites"
          color="#07c160">
          ä»…æ”¶è—
        </checkbox>
      </view>
    </view>

    <!-- æ ‡ç­¾ç­›é€‰åœ¨åŒä¸€è¡Œ -->
    <view class="tags-container">
      <view class="tags">
        <text class="tags-title">æ ‡ç­¾ç­›é€‰</text>
        <block wx:for="{{allTags}}" wx:key="name">
          <view class="tag {{item.selected ? 'active' : ''}}" bindtap="toggleTagFilter" data-tag="{{item.name}}">
            {{item.name}}
          </view>
        </block>
      </view>
    </view>
  </view>

  <!-- æ¨èç»“æœ -->
  <view class="result" wx:if="{{selectedDish}}">
    <view class="dish-card-container {{isFlipping ? 'flipping' : ''}}">
      <view class="dish-card">
        <image wx:if="{{selectedDish.image}}" class="dish-image" src="{{selectedDish.image}}" mode="aspectFill"></image>

        <view class="dish-header">
          <text class="dish-name">{{selectedDish.name}}</text>
          <view class="dish-tags">
            <text wx:for="{{selectedDish.tags}}" wx:key="*this">{{item}}</text>
          </view>
        </view>

        <view class="dish-recipe">
          <text wx:for="{{selectedDish.recipe}}" wx:key="*this">{{item}}</text>
        </view>

        <view class="dish-footer">
          <view class="rating">
            <text wx:for="{{[1,2,3,4,5]}}" wx:key="*this" wx:for-item="rate"
              class="star {{rate <= selectedDish.userRating ? 'active' : ''}}" catchtap="rateDish"
              data-rating="{{rate}}">â˜…</text>
          </view>
          <view class="favorite" catchtap="toggleFavorite">
            {{selectedDish.isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}
          </view>
          <view class="edit" catchtap="editDish">
            âœï¸
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- éšæœºæ¨èæŒ‰é’® -->
  <view class="action-bar">
    <button class="random-btn" bindtap="randomSelect">ğŸ² æ¢ä¸€ä¸ª</button>
  </view>
</view>